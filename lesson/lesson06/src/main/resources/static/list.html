<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.js"></script>
<title>login</title>
</head>
<body>
<form action="/search" method="post">
    username:<input type="text" name="newusername" />
    <button type="button" id="addBtn">add</button><span id="addResult"></span><hr>
    username:<input type="text" name="username" />
    <button type="button" id="searchBtn">search</button>
    <div id="searchArea">    
    </div>
</form>

<script>
$(document).ready(function(){
	$("#addBtn").click(function(){
		let data = {
				"username" : $("input[name='newusername']").val()
		};
		
		let result = $.ajax({
			url: "/add", 
			type: 'get', 
			async: false,
			dataType: 'json',
			data: data
		})

		$("#addResult").text(result.responseText);
					
	});
	
	$("#searchBtn").click(function(){
		let data = {
				"username" : $("input[name='username']").val()
		};
		
		let result = $.ajax({
			url: $("form").attr("action"), 
			type: 'get', 
			async: false,
			dataType: 'json',
			data: data
		})

		$("#searchArea").html(result.responseJSON.map(JSON.stringify).join("<BR>"));
					
	});
});
</script>

</body>
</html>